<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Supplier – Pending Baskets</title>
<style>
body{font-family:Arial;background:#f4f5f7;margin:0}
header{background:#fff;padding:14px 18px;font-size:18px;font-weight:600;border-bottom:1px solid #ddd}
.card{background:#fff;margin:12px;border-radius:8px;padding:12px;border:1px solid #ddd}
.buyer{font-size:16px;font-weight:600}
.meta{font-size:13px;color:#555;margin-top:4px}
.items{margin-top:8px;font-size:13px}
.items div{display:flex;justify-content:space-between;border-top:1px dashed #ddd;padding:4px 0}
.ready{color:#27ae60;font-weight:700}
.running{color:#f39c12;font-weight:700}
button{margin-top:10px;padding:8px 12px;border:none;border-radius:4px;background:#000;color:#fff;cursor:pointer}
</style>
</head>
<body>

<header>Pending Buyer Baskets</header>
<div id="list"></div>

<script>
const supplierId = localStorage.getItem("supplierId");

fetch("https://script.google.com/macros/s/AKfycbyBWZeeZbMCpSaOcXeGzXc1o3HMGfko8n2YI4Veu2Ru2CQtyOKN6JNmJMt6ueqBrxxo/exec?action=getSupplierPendingBaskets&supplierId="+supplierId)
.then(r=>r.json())
.then(res=>{
  const el = document.getElementById("list");
  res.data.forEach(b=>{
    const d=document.createElement("div");
    d.className="card";
    d.innerHTML=`
      <div class="buyer">Buyer: ${b.buyerId}</div>
      <div class="meta">Sets: ${b.totalSets} | Value: ₹${b.totalValue.toFixed(0)} |
        <span class="${b.status==='READY'?'ready':'running'}">${b.status}</span>
      </div>
      <div class="items">
        ${b.items.map(i=>`<div><span>${i.productName}</span><span>${i.sets} sets</span></div>`).join("")}
      </div>
      ${b.status==='READY'?`<button onclick="createOrder('${b.basketId}')">Create Order</button>`:""}
    `;
    el.appendChild(d);
  });
});

function createOrder(basketId){
  alert("Next step: convert "+basketId+" to order");
}
</script>

</body>
</html>
